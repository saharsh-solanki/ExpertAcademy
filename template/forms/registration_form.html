{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">

    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->
    <title>Registration Form</title>

    <!-- Icons font CSS-->
    <link href="{% static 'rgcss/vendor/mdi-font/css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'rgcss/vendor/font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- {% static 'rgcss/vendor CSS-->
    <link href="{% static 'rgcss/vendor/select2/select2.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'rgcss/vendor/datepicker/daterangepicker.css' %}" rel="stylesheet" media="all">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- Main CSS-->
    <link href="{% static 'rgcss/css/main.css' %}" rel="stylesheet" media="all">
          <style>
#button{
  display:block;
  margin:20px auto;
  padding:10px 30px;
  background-color:#eee;
  border:solid #ccc 1px;
  cursor: pointer;
}
#overlay{
  position: fixed;
  top: 0;
  z-index: 100;
  width: 100%;
  height:100%;
  display: none;
  background: rgba(0,0,0,0.6);
}
.cv-spinner {
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.spinner {
  width: 40px;
  height: 40px;
  border: 4px #ddd solid;
  border-top: 4px #2e93e6 solid;
  border-radius: 50%;
  animation: sp-anime 0.8s infinite linear;
}
@keyframes sp-anime {
  100% {
    transform: rotate(360deg);
  }
}
.is-hide{
  display:none;
}
</style>
</head>

<body>
<div id="overlay">
      <div class="cv-spinner">
        <span class="spinner"></span>
      </div>
  </div>
    <div class="page-wrapper bg-gra-02 p-t-30  font-poppins">
        <div class="wrapper wrapper--w680">
            <div class="card card-4">
                <div class="card-body">
                    <h2 class="title">Registration Form</h2>
                    <form onsubmit="event.preventDefault(); check();" >
                         {% csrf_token %}
                        <div class="row row-space">
                            <div class="col">
                                <div class="input-group">
                                    <label class="label">first name</label>
                                    <input class="input--style-4" type="text" id="first_name" name="first_name">
                                </div>
                            </div>
                            <div class="col">
                                <div class="input-group">
                                    <label class="label">last name</label>
                                    <input class="input--style-4" type="text" id="last_name" name="last_name">
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                            <div class="col">
                                <div class="input-group">
                                    <label class="label">Age</label>
                                    <div class="input-group-icon">
                                        <input class="input--style-4 js-datepicker" type="number" id="age" name="age">

                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="input-group">
                                    <label class="label">Gender</label>
                                    <div class="p-t-10">
                                        <label class="radio-container m-r-45">Male
                                            <input type="radio" checked="checked" value="male" class="gender" name="gender">
                                            <span class="checkmark"></span>
                                        </label>
                                        <label class="radio-container">Female
                                            <input type="radio" name="gender" value="female" class="gender" >
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row row-space">
                            <div class="col">
                                <div class="input-group">
                                    <label class="label">Email</label>
                                    <input class="input--style-4" type="email" id="email" name="email">
                                </div>
                            </div>
                            <div class="col">
                                <div class="input-group">
                                    <label class="label">Phone Number</label>
                                    <input class="input--style-4" type="number" id="phone" name="phone">
                                </div>
                            </div>
                        </div>
                          <div class="input-group">
                                    <label class="label">Password</label>
                                    <input class="input--style-4 pass" type="password" id="password" name="password">
                                    <button type="button" id="show_password" class="showpass"><i id="showpass" class=" icon p-t-30 input-icon fa fa-eye-slash"></i></button>
                          </div>

                        <div class="p-t-15">
                            <button id="register_btn" class="btn btn--radius-2 btn--blue" type="submit">Submit</button>
                        </div>
                         Already Have An Account ?<a href="login" type="button" class="btn text-dark text-decoration-none" id="resend_otp">login</a>

                    </form>
                </div>
            </div>
        </div>
    </div>


      <!-- Modal HTML -->
    <div id="myModal" tabindex="-1"  class="modal fade " >
        <div class="modal-dialog" style=" margin-top:3%;max-width:35rem;width:90%;" >
            <div class="modal-content">
                <div class="modal-body">
                     <button type="button" class="close" id="close_model" >&times;</button>
                <center>
               <div class="h6">MESSAGE :<hr> </div>
                   <div id="msg"></div><br>
                </center>
                </div>
            </div>
        </div>
    </div>

    <!-- Jquery JS-->
    <script src="{% static 'rgcss/vendor/jquery/jquery.min.js' %}"></script>
    <!-- {% static 'rgcss/vendor JS-->
    <script src="{% static 'rgcss/vendor/select2/select2.min.js' %}"></script>
    <script src="{% static 'rgcss/vendor/datepicker/moment.min.js' %}"></script>
    <script src="{% static 'rgcss/vendor/datepicker/daterangepicker.js' %}"></script>
    <script>
        $(document).ready(function(){

           function check(){
                 var first_name=$("#first_name").val();
                var last_name=$("#last_name").val();
                var email=$("#email").val();
                var age=$("#age").val();
                var password=$("#password").val();
                var phone=$("#phone").val();
                var gender = $(".gender:checked").val();
                const my_data={age:age,phone:phone,gender:gender,name:first_name+" "+last_name,email:email,password:password,"csrfmiddlewaretoken":$('input[name=csrfmiddlewaretoken]').val()};
                console.log(my_data);
                if( email == ""){
                $('#msg').text("Please Enter Email Address");
                           $("#myModal").modal('show');
                }
                else if( first_name == ""){
                $('#msg').text("Please Enter First Name");
                           $("#myModal").modal('show');
                }
                else if( last_name == ""){
                $('#msg').text("Please Enter Last Name");
                           $("#myModal").modal('show');
                }
                else if( age == ""){
                $('#msg').text("Please Enter age");
                           $("#myModal").modal('show');
                }
                else if( phone == ""){
                $('#msg').text("Please Enter Phone");
                           $("#myModal").modal('show');
                }
                else if( password == ""){
                $('#msg').text("Please Enter Password");
                           $("#myModal").modal('show');
                }
                else if(phone.length<10){

                $('#msg').text("Please Enter Valid 10 Digit Mobile Number");
                           $("#myModal").modal('show');
                }
                else if(phone.length>10){
                $('#msg').text("Please Enter Valid 10 Digit Mobile Number");
                           $("#myModal").modal('show');
                }
                else if(password.length<=5){
                $('#msg').text("Password Must 6 Digit");
                           $("#myModal").modal('show');
                }
                else{
                $.ajax({
                     'url':'{% url 'register' %}',
                     'method':'POST',
                     'data':my_data,
                      'beforeSend': function () { // Before we send the request, remove the .hidden class from the spinner and default to inline-block.
                        $("#overlay").fadeIn(300);ã€€
                         },
                     'success':function(data){
                      $("#overlay").fadeOut(300);
                      if(data.status==0){
                      window.location.href ='{% url 'verify-otp' %}';
                       }//end of if success
                       else if(data.status==1){

                           $('#msg').text(data.msg);
                           $("#myModal").modal('show');
                       }
                       else{
                         $('#msg').text(data.msg);
                           $("#myModal").modal('show');
                       }
                     },
                });//end of register ajax
                }//end of else
           }//end of check

            $("#register_btn").click(function(){
              check();
            });//end of register

            $("#registration_form").submit(function(){
              console.log('form submited');
            });//end of register

            $("#close_model").click(function(){
                $("#myModal").modal('hide');
            });//close model function

           $('#show_password').hover(function show() {
                //Change the attribute to text
                $('#password').attr('type', 'text');
                $('.icon').removeClass('fa fa-eye-slash').addClass('fa fa-eye');
            },
            function () {
                //Change the attribute back to password
                $('#password').attr('type', 'password');
                $('.icon').removeClass('fa fa-eye').addClass('fa fa-eye-slash');
            });




        });//end of duocument



    </script>
    <!-- Main JS-->
    <script src="{% static 'js/global.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>

</html>
<!-- end document-->